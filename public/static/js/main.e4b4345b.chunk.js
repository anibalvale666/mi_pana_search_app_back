(this["webpackJsonpmipana-consulta-front"]=this["webpackJsonpmipana-consulta-front"]||[]).push([[0],{57:function(e,t,a){},59:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(19),r=a.n(n),s=a(7),o=a(21),i=a(38),l=a(4),j="[data] Add new data",d="[data] Data Search Result",b="[data] Data Update",u="[data] Initial State",h="[auth] FinishChecking login State",m="[auth] Login",O="[auth] Logout",p={checking:!0,nick:null},x={searchData:{placa:"",marca:"",aceite_motor:{aceite:"",fecha:new Date,km:""},aceite_caja:{aceite:"",fecha:new Date,km:""},filtros:{aceite:"",aire:"",combustible:"",cabina:""},liquido_radiador:{liquido:"",fecha:new Date,km:""},obs:"",id:""}},f=Object(o.b)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(l.a)({},e);case d:case b:return Object(l.a)(Object(l.a)({},e),{},{searchData:t.payload});case u:return Object(l.a)(Object(l.a)({},e),{},{searchData:x.searchData});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(l.a)(Object(l.a)(Object(l.a)({},e),t.payload),{},{checking:!1});case h:return Object(l.a)(Object(l.a)({},e),{},{checking:!1});case O:return{checking:!1};default:return e}}}),v="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,g=Object(o.d)(f,v(Object(o.a)(i.a))),N=a(17),k=a(6),y=a(13),C=a.n(y),w=a(18),S="https://mi-pana-app.herokuapp.com/api",D=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c="".concat(S,"/").concat(e);return"GET"===a?fetch(c):fetch(c,{method:a,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},_=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c="".concat(S,"/").concat(e),n=localStorage.getItem("token")||"";return"GET"===a?fetch(c,{method:a,headers:{"x-token":n}}):fetch(c,{method:a,headers:{"Content-type":"application/json","x-token":n},body:JSON.stringify(t)})},A=a(12),E=a.n(A),L=function(){return{type:h}},I=function(e){return{type:m,payload:e}},T=function(){return{type:O}},q=a(8),F=a(20),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),a=Object(q.a)(t,2),n=a[0],r=a[1],s=function(){r(e)},o=function(e){var t=e.state;r(t)},i=function(e){var t=e.target,a=t.name.split("."),c=Object(q.a)(a,2),s=c[0],o=c[1];r(o?Object(l.a)(Object(l.a)({},n),{},Object(F.a)({},s,Object(l.a)(Object(l.a)({},n[s]),{},Object(F.a)({},o,t.value)))):Object(l.a)(Object(l.a)({},n),{},Object(F.a)({},s,t.value)))};return[n,i,s,o]},G=(a(57),a(2)),R=function(){var e=Object(s.b)(),t=P({nick:"",password:""}),a=Object(q.a)(t,2),c=a[0],n=a[1],r=c.nick,o=c.password;return Object(G.jsx)("div",{className:"container login-container",children:Object(G.jsx)("div",{className:"row",children:Object(G.jsxs)("div",{className:"col-md-6 login-form-1",children:[Object(G.jsx)("h3",{children:"Ingreso"}),Object(G.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(function(e,t){return function(){var a=Object(w.a)(C.a.mark((function a(c){var n,r;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D("auth",{nick:e,password:t},"POST");case 2:return n=a.sent,a.next=5,n.json();case 5:(r=a.sent).ok?(localStorage.setItem("token",r.token),localStorage.setItem("token-init-date",(new Date).getTime()),c(I({nick:r.nick}))):E.a.fire("Error",r.msg,"error");case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(r,o))},children:[Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"text",className:"form-control",placeholder:"nick",name:"nick",autoComplete:"off",value:r,onChange:n})}),Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",name:"password",autoComplete:"off",value:o,onChange:n})}),Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"submit",className:"btnSubmit",value:"Login"})})]})]})})})},U=function(){var e=Object(s.c)((function(e){return e.data})).searchData,t=e.marca,a=e.aceite_motor,c=e.aceite_caja,n=e.filtros,r=e.liquido_radiador,o=e.obs,i=new Date(a.fecha),l=new Date(c.fecha),j=new Date(a.fecha);return Object(G.jsx)("div",{children:Object(G.jsxs)("div",{className:"search-response-box box",children:[Object(G.jsxs)("h3",{children:[" ",t," "]}),Object(G.jsx)("h4",{children:"Aceite:"}),Object(G.jsxs)("table",{className:"table",children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"col",children:"Aceite"}),Object(G.jsx)("th",{scope:"col",children:"Fecha de cambio"}),Object(G.jsx)("th",{scope:"col",children:"Kilometraje"})]})}),Object(G.jsxs)("tbody",{children:[Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:a.aceite}),Object(G.jsx)("td",{children:i.toLocaleDateString("en-US")}),Object(G.jsx)("td",{children:a.km})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:c.aceite}),Object(G.jsx)("td",{children:l.toLocaleDateString("en-US")}),Object(G.jsx)("td",{children:c.km})]})]})]}),Object(G.jsx)("h4",{children:"Filtros:"}),Object(G.jsxs)("table",{className:"table",children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"col",children:"Aceite"}),Object(G.jsx)("th",{scope:"col",children:"Aire"}),Object(G.jsx)("th",{scope:"col",children:"Combustible"}),Object(G.jsx)("th",{scope:"col",children:"Cabina"})]})}),Object(G.jsx)("tbody",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:n.aceite}),Object(G.jsx)("td",{children:n.aire}),Object(G.jsx)("td",{children:n.combustible}),Object(G.jsx)("td",{children:n.cabina})]})})]}),Object(G.jsx)("h4",{children:"Refrigerante:"}),Object(G.jsxs)("table",{className:"table",children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{scope:"col",children:"Refrigerante"}),Object(G.jsx)("th",{scope:"col",children:"Fecha"}),Object(G.jsx)("th",{scope:"col",children:"Kilometraje"})]})}),Object(G.jsx)("tbody",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:r.liquido}),Object(G.jsx)("td",{children:j.toLocaleDateString("en-US")}),Object(G.jsx)("td",{children:r.km})]})})]}),Object(G.jsx)("h4",{children:"Observaciones:"}),Object(G.jsx)("p",{children:o})]})})},K=(a(59),function(e){return function(){var t=Object(w.a)(C.a.mark((function t(a){var c,n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D("data",{placa:e},"POST");case 3:return c=t.sent,t.next=6,c.json();case 6:(n=t.sent).ok?a(J(n.data)):(E.a.fire("Error",n.msg,"error"),a(z())),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}),J=function(e){return{type:d,payload:e}},z=function(){return{type:u}},B=function(e){return{type:j,payload:e}},M=function(e){return{type:b,payload:e}},X=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.auth})).nick;return Object(G.jsxs)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark",children:[Object(G.jsx)(N.b,{className:"navbar-brand",to:"/",children:"MiPana"}),Object(G.jsx)("div",{className:"navbar-collapse collapse w-100 order-3 dual-collapse2",children:Object(G.jsx)("ul",{className:"navbar-nav ml-auto",children:t?Object(G.jsx)("button",{className:"btn btn-outline-danger",onClick:function(){e((function(e){localStorage.clear(),e(T())})),e(z())},children:"Logout"}):Object(G.jsx)(N.c,{activeClassName:"active",className:"nav-item nav-link",exact:!0,to:"/login",children:"Login"})})})]})},V=function(){var e=Object(s.c)((function(e){return e.data.searchData.placa})),t=Object(s.b)(),a=P({placa:""}),c=Object(q.a)(a,2),n=c[0],r=c[1],o=n.placa;return Object(G.jsxs)("div",{children:[Object(G.jsx)(X,{}),Object(G.jsxs)("div",{className:"search-container",children:[Object(G.jsx)("div",{className:"search-box",children:Object(G.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""===o)return E.a.fire("Error","Ingrese la Placa","error");t(K(o))},children:[Object(G.jsx)("h1",{children:"Ingrese la Placa:"}),Object(G.jsx)("input",{type:"text",placeholder:"Ingrese la placa...",name:"placa",autoComplete:"off",value:o,maxLength:"6",onChange:r}),Object(G.jsxs)("button",{type:"submit",className:"btn btn-outline-primary ml-2",children:[Object(G.jsx)("i",{className:"fas fa-search"}),Object(G.jsx)("span",{children:" Buscar"})]})]})}),!!e&&Object(G.jsx)(U,{})]})]})},H=a(27),Q=a.n(H),W=(a(76),function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.data})).searchData,a=P(t),n=Object(q.a)(a,3),r=n[0],o=n[1],i=n[2],l=r.id,j=r.placa,d=r.marca,b=r.obs,u=r.aceite_motor,h=r.aceite_caja,m=r.filtros,O=r.liquido_radiador,p=Object(c.useState)(new Date),x=Object(q.a)(p,2),f=x[0],v=x[1],g=Object(c.useState)(new Date),N=Object(q.a)(g,2),k=N[0],y=N[1],S=Object(c.useState)(new Date),D=Object(q.a)(S,2),A=D[0],L=D[1],I=Object(c.useState)(!1),T=Object(q.a)(I,2),F=T[0],R=T[1],U=Object(c.useState)(!0),J=Object(q.a)(U,2),V=J[0],H=J[1],W=Object(c.useState)(!0),Y=Object(q.a)(W,2),Z=Y[0],$=Y[1];Object(c.useEffect)((function(){i(t)}),[t]);return Object(G.jsxs)("div",{children:[Object(G.jsx)(X,{}),Object(G.jsx)("div",{className:"register-container",children:Object(G.jsxs)("div",{className:"register-box",children:[Object(G.jsx)("h3",{children:"Registro & Actualizaci\xf3n"}),Object(G.jsxs)("form",{onSubmit:function(t){return t.preventDefault(),6!==j.trim().length?(H(!1),E.a.fire("Error","La placa debe contener 6 digitos","error")):(H(!0),0===d.trim().length?($(!1),E.a.fire("Error","el campo marca no debe estar vacio","error")):($(!0),void e(""===l?(a=r,function(){var e=Object(w.a)(C.a.mark((function e(t){var c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_("data/new",a,"POST");case 3:return c=e.sent,e.next=6,c.json();case 6:e.sent.ok&&(t(B(a)),E.a.fire("Guardado","Guardado con \xe9xito","success")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()):function(e){return function(){var t=Object(w.a)(C.a.mark((function t(a){var c,n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_("data/".concat(e.id),e,"PUT");case 3:return c=t.sent,t.next=6,c.json();case 6:(n=t.sent).ok?(a(M(e)),E.a.fire("Actualizado","Actualizado con \xe9xito","success")):E.a.fire("Error",n.msg,"error"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(r))));var a},children:[Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("input",{type:"text",className:" text ".concat(!V&&"is-invalid"),placeholder:"Ingrese la placa...",name:"placa",autoComplete:"off",maxLength:"6",value:j,onChange:o,disabled:F&&"disabled"}),Object(G.jsx)("button",{className:"btn btn-primary ml-2",onClick:function(t){t.preventDefault(),R(!0),e(K(j))},children:"Buscar"}),Object(G.jsx)("button",{className:"btn btn-primary ml-2",onClick:function(t){t.preventDefault(),R(!1),e(z())},children:"Reset"})]}),Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"text",className:"form-control ".concat(!Z&&"is-invalid"),placeholder:"marca modelo",name:"marca",autoComplete:"off",value:d,onChange:o,disabled:!F&&"disabled"})}),Object(G.jsxs)("div",{className:"row",children:[Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("label",{children:"Aceite de motor:"})}),Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"text",className:"form-control",placeholder:"Aceite motor",name:"aceite_motor.aceite",autoComplete:"off",value:u.aceite,onChange:o,disabled:!F&&"disabled"})})}),Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)(Q.a,{onChange:function(e){v(e),o({target:{name:"aceite_motor.fecha",value:e}})},value:f,className:"form-control",disabled:!F})})}),Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"text",className:"form-control",placeholder:"Kilometraje motor",name:"aceite_motor.km",autoComplete:"off",value:u.km,onChange:o,disabled:!F&&"disabled"})})})]}),Object(G.jsxs)("div",{className:"row",children:[Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("label",{children:"Aceite de caja:"})}),Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"text",className:"form-control",placeholder:"Aceite caja",name:"aceite_caja.aceite",autoComplete:"off",value:h.aceite,onChange:o,disabled:!F&&"disabled"})})}),Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)(Q.a,{onChange:function(e){y(e),o({target:{name:"aceite_caja.fecha",value:e}})},value:k,className:"form-control",disabled:!F})})}),Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"text",className:"form-control",placeholder:"Kilometraje caja",name:"aceite_caja.km",autoComplete:"off",value:h.km,onChange:o,disabled:!F&&"disabled"})})})]}),Object(G.jsxs)("div",{className:"row",children:[Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("label",{children:"Filtros:"})}),Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"text",className:"form-control",placeholder:"Filtro Aceite",name:"filtros.aceite",autoComplete:"off",value:m.aceite,onChange:o,disabled:!F&&"disabled"})})}),Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"text",className:"form-control",placeholder:"Filtro Aire",name:"filtros.aire",autoComplete:"off",value:m.aire,onChange:o,disabled:!F&&"disabled"})})}),Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"text",className:"form-control",placeholder:"Filtro Combustible",name:"filtros.combustible",autoComplete:"off",value:m.combustible,onChange:o,disabled:!F&&"disabled"})})}),Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"text",className:"form-control",placeholder:"Filtro cabina",name:"filtros.cabina",autoComplete:"off",value:m.cabina,onChange:o,disabled:!F&&"disabled"})})})]}),Object(G.jsxs)("div",{className:"row",children:[Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("label",{children:"Liquido de radiador:"})}),Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"text",className:"form-control",placeholder:"Liquido de radiador",name:"liquido_radiador.liquido",autoComplete:"off",value:O.liquido,onChange:o,disabled:!F&&"disabled"})})}),Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)(Q.a,{onChange:function(e){L(e),o({target:{name:"liquido_radiador.fecha",value:e}})},value:A,className:"form-control",disabled:!F})})}),Object(G.jsx)("div",{className:"col",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"text",className:"form-control",placeholder:"Kilometraje radiador",name:"liquido_radiador.km",autoComplete:"off",value:O.km,onChange:o,disabled:!F&&"disabled"})})})]}),Object(G.jsx)("input",{type:"text",className:"form-control",placeholder:"Observaciones",name:"obs",autoComplete:"off",value:b,onChange:o,disabled:!F&&"disabled"}),Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("input",{type:"submit",className:"btnSubmit",value:"Guardar",disabled:!F&&"disabled"})})]})]})})]})}),Y=a(26),Z=["isAuthenticated","component"],$=function(e){var t=e.isAuthenticated,a=e.component,c=Object(Y.a)(e,Z);return Object(G.jsx)(k.b,Object(l.a)(Object(l.a)({},c),{},{component:function(e){return t?Object(G.jsx)(a,Object(l.a)({},e)):Object(G.jsx)(k.a,{to:"/"})}}))},ee=["isAuthenticated","component"],te=function(e){var t=e.isAuthenticated,a=e.component,c=Object(Y.a)(e,ee);return Object(G.jsx)(k.b,Object(l.a)(Object(l.a)({},c),{},{component:function(e){return t?Object(G.jsx)(k.a,{to:"/register"}):Object(G.jsx)(a,Object(l.a)({},e))}}))},ae=function(){var e=Object(s.c)((function(e){return e.auth})).nick,t=Object(s.b)();return Object(c.useEffect)((function(){t(function(){var e=Object(w.a)(C.a.mark((function e(t){var a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("auth/renew",{},"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:(c=e.sent).ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(I({nick:c.nick}))):t(L());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]),Object(G.jsx)(N.a,{children:Object(G.jsx)("div",{children:Object(G.jsxs)(k.d,{children:[Object(G.jsx)(te,{exact:!0,path:"/",component:V,isAuthenticated:!!e}),Object(G.jsx)(te,{exact:!0,path:"/login",component:R,isAuthenticated:!!e}),Object(G.jsx)($,{exact:!0,path:"/register",component:W,isAuthenticated:!!e}),Object(G.jsx)(k.a,{to:"/"})]})})})},ce=function(){return Object(G.jsx)(s.a,{store:g,children:Object(G.jsx)(ae,{})})};r.a.render(Object(G.jsx)(ce,{}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.e4b4345b.chunk.js.map